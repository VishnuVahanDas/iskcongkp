<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Donate</title>
  <style>
    :root { --border:#e5e7eb; --muted:#6b7280; --fg:#111; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 2rem; color: var(--fg); }
    .card { max-width: 760px; margin: auto; padding: 1.25rem; border: 1px solid var(--border); border-radius: 12px; }
    .row { display: grid; grid-template-columns: 1fr 2fr; gap: .75rem; align-items: center; margin: .5rem 0; }
    .row > label { color: var(--muted); }
    input[type="text"], input[type="email"], input[type="number"], select { width: 100%; padding: .6rem .7rem; border: 1px solid var(--border); border-radius: 8px; font-size: 1rem; }
    .muted { color: var(--muted); font-size: .95rem; }
    .btn { display: inline-flex; align-items: center; gap: .5rem; padding: .6rem 1rem; border-radius: 8px; border: 1px solid #111; background: #111; color: #fff; cursor: pointer; }
    .btn-link { color: #111; text-decoration: none; }
    .amounts { display: flex; gap: .5rem; flex-wrap: wrap; }
    .chip { padding: .45rem .7rem; border: 1px solid var(--border); border-radius: 999px; cursor: pointer; }
    .chip.active { border-color: #111; background: #111; color: #fff; }
    .section { margin: 1rem 0; }
    #addr { display: none; }
  </style>
  <script>
    function onReady() {
      const amountDefault = '{{ amount_default|default:"" }}';
      const purposeDefault = '{{ purpose_default|default:"General" }}';
      const amountEl = document.getElementById('amount');
      const purposeEl = document.getElementById('purpose');
      if (amountDefault) amountEl.value = amountDefault;
      if (purposeDefault) purposeEl.value = purposeDefault;

      // quick amount chips
      document.querySelectorAll('[data-amt]').forEach(btn => {
        btn.addEventListener('click', () => {
          const v = btn.getAttribute('data-amt');
          amountEl.value = v; 
          document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
          btn.classList.add('active');
        });
      });
      // 80G toggle
      const chk = document.getElementById('need80g');
      const addr = document.getElementById('addr');
      function updateAddr(){ addr.style.display = chk.checked ? 'block' : 'none'; }
      chk.addEventListener('change', updateAddr); updateAddr();
    }
    document.addEventListener('DOMContentLoaded', onReady);
  </script>
</head>
<body>
  <div class="card">
    <div class="section">
      <a class="btn-link" href="{% url 'donations:donate_choose' %}">← Choose cause & presets</a>
    </div>
    <h2>Donor details</h2>
    <p class="muted">We’ll email a receipt after successful payment.</p>
    <form method="post" action="{% url 'donations:donate_checkout' %}">
      {% csrf_token %}
      <div class="row"><label>Full name</label><input name="name" placeholder="Full name" required /></div>
      <div class="row"><label>Email</label><input name="email" type="email" placeholder="you@example.com" required /></div>
      <div class="row"><label>Phone</label><input name="phone" placeholder="+91XXXXXXXXXX" required /></div>
      <div class="row">
        <label>Amount (₹)</label>
        <div>
          <div class="amounts" style="margin-bottom:.5rem;">
            <span class="chip" data-amt="501">₹501</span>
            <span class="chip" data-amt="1001">₹1001</span>
            <span class="chip" data-amt="5001">₹5001</span>
            <span class="chip" data-amt="11001">₹11001</span>
          </div>
          <input id="amount" name="amount" type="number" min="1" step="1" placeholder="Custom amount" required />
        </div>
      </div>
      <div class="row">
        <label>Purpose</label>
        <select id="purpose" name="purpose">
          <option>General</option>
          <option>Shastra Daan</option>
          <option>Annadana Seva</option>
          <option>Nitya Seva</option>
          <option>Temple Seva</option>
          <option>Janmashtami Seva</option>
          <option>Tula Daan Utsav</option>
        </select>
      </div>
      <div class="row">
        <label>80G Receipt</label>
        <div>
          <label><input id="need80g" type="checkbox" name="need_80g" /> I need an 80G tax receipt</label>
          <div id="addr" class="section">
            <div class="row"><label>Address line 1</label><input name="address_line1" placeholder="Address line 1" /></div>
            <div class="row"><label>Address line 2</label><input name="address_line2" placeholder="Address line 2" /></div>
            <div class="row"><label>City</label><input name="city" placeholder="City" /></div>
            <div class="row"><label>State</label><input name="state" placeholder="State" /></div>
            <div class="row"><label>PIN</label><input name="postal_code" placeholder="PIN" /></div>
            <div class="row"><label>Country</label><input name="country" value="IN" /></div>
            <div class="row"><label>PAN (optional)</label><input name="pan" placeholder="ABCDE1234F" /></div>
          </div>
        </div>
      </div>
      <div class="section"><button class="btn" type="submit">Proceed to payment</button></div>
    </form>
  </div>
</body>
</html>
